var idbKeyval=function(e){"use strict";class t{constructor(e="keyval-store",t="keyval"){this.dbName=e,this.storeName=t,this._dbp=new Promise((r,n)=>{const o=indexedDB.open(e,1);o.onerror=(()=>n(o.error)),o.onsuccess=(()=>r(o.result)),o.onupgradeneeded=(()=>{o.result.createObjectStore(t)})})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((n,o)=>{const s=r.transaction(this.storeName,e);s.oncomplete=(()=>n()),s.onabort=s.onerror=(()=>o(s.error)),t(s.objectStore(this.storeName))}))}}let r,n;function o(){return Math.round((new Date).getTime()/1e3)}function s(){return r||(r=new t),r}function i(e){return n||(n=new t(e,"keysToExpire"),window.setInterval(function(){l(n).then(e=>{let t=o();for(let r of e)u(r,n).then(e=>{e<t&&c(r,n)})})},18e4)),r}function u(e,t=s()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)}function c(e,t=s()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}function l(e=s()){const t=[];return e._withIDBStore("readonly",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}return e.Store=t,e.get=u,e.set=function(e,t,r=0,n=s()){return n._withIDBStore("readwrite",r=>{r.put(t,e)}).then(function(){if(r){console.log("setting key to expire"),console.log(n.dbName),n=i(n.dbName),console.log(n);let t=o();n._withIDBStore("readwrite",n=>{n.put(e,t+r)})}})},e.del=c,e.clear=function(e=s()){return e._withIDBStore("readwrite",e=>{e.clear()})},e.keys=l,e}({});